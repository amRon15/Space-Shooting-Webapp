<!DOCTYPE html>
<html>
  <head>
    <title>Smooth Rectangle Movement</title>
  </head>
  <body>
    <canvas id="my-canvas" width="500" height="500"></canvas>

    <script>
      // Get the canvas element
      const canvas = document.getElementById("my-canvas");

      // Create a rectangle object
      const rectangle = {
        x: 100,
        y: 100,
        width: 50,
        height: 50,
      };

      // Create a flag to indicate whether the key is being pressed
      let isKeyPressed = false;

      // Create a timestamp to track the last time the rectangle was updated
      let lastTimestamp = 0;

      // Create a function to draw the rectangle
      const drawRectangle = () => {
        // Clear the canvas
        canvas.getContext("2d").clearRect(0, 0, canvas.width, canvas.height);

        // Draw the rectangle
        canvas
          .getContext("2d")
          .fillRect(
            rectangle.x,
            rectangle.y,
            rectangle.width,
            rectangle.height
          );
      };

      // Create a function to move the rectangle
      const moveRectangle = (timestamp) => {
        // Calculate the time elapsed since the last update
        const elapsedTime = timestamp - lastTimestamp;

        // Check if the key is being pressed
        if (isKeyPressed) {
          // Update the rectangle's position based on the elapsed time
          rectangle.x += elapsedTime / 10;

          // Redraw the rectangle
          drawRectangle();
        }

        // Schedule the next movement using requestAnimationFrame
        requestAnimationFrame(moveRectangle);

        // Update the last timestamp
        lastTimestamp = timestamp;
      };

      // Add event listeners for the arrow keys
      document.addEventListener("keydown", (event) => {
        // Set the isKeyPressed flag to true when a key is pressed
        isKeyPressed = true;
      });

      document.addEventListener("keyup", (event) => {
        // Set the isKeyPressed flag to false when a key is released
        isKeyPressed = false;
      });

      // Start the movement loop
      requestAnimationFrame(moveRectangle);
    </script>
  </body>
</html>
